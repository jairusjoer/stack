services:
  nuxt:
    container_name: nuxt
    build: ./
    restart: always
    ports:
      - 3000:3000

  # https://docs.directus.io/self-hosted/quickstart.html
  directus:
    container_name: directus
    image: directus/directus
    restart: always
    ports:
      - 8055:8055
    volumes:
      - ./directus/database:/directus/database
      - ./directus/uploads:/directus/uploads
      - ./directus/extensions:/directus/extensions
    environment:
      # https://docs.directus.io/self-hosted/config-options.html
      SECRET: '4zda5i6YyfMjERa4GMPUA47jJEmSWMtE'
      ADMIN_EMAIL: 'admin@example.com'
      ADMIN_PASSWORD: 'd1r3ctu5'
      DB_CLIENT: 'sqlite3'
      DB_FILENAME: './database/directus.db'
      WEBSOCKETS_ENABLED: true
      CORS_ENABLED: true
      CORS_ORIGIN: 'http://localhost:3000'
