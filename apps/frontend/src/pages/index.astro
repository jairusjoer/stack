---
import '@repo/ui/styles/tailwind.css';
import { createAuthenticatedClient } from '@repo/directus/api/authentication.ts';
import { PUBLIC_URL } from 'astro:env/client';
import { SECRET_EMAIL, SECRET_PASSWORD } from 'astro:env/server';
import User from '../islands/User.astro';

const client = await createAuthenticatedClient({
  url: PUBLIC_URL,
  payload: { email: SECRET_EMAIL, password: SECRET_PASSWORD },
});
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/favicon.svg"
    />
    <meta
      name="viewport"
      content="width=device-width"
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <title>Astro</title>
  </head>
  <body>
    <User {client} />
  </body>
</html>
