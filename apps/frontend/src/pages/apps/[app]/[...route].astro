---
import { AppProvider } from '../../../components/react/app-provider';
import { routeTree } from '../../../routeTree.gen';
import Default from '../../../layouts/default.astro';

export function getStaticPaths() {
  const children = Object.values(routeTree.children || {});

  const params = children.map((child) => {
    const [app, ...route] = child.options.path.replace('/apps/', '').split('/');

    if (import.meta.env.DEV) {
      return { params: { app, route: route.join('/') } };
    }

    return { params: { app, route: '/' } };
  });

  return params;
}

const { route } = Astro.params;
console.log(route);
---

<Default>
  <AppProvider client:only="react" />
</Default>
